cmake_minimum_required(VERSION 2.8.2)

project(fasm2bels NONE)
include(ExternalProject)
ExternalProject_Add(fasm2bels
    GIT_REPOSITORY https://github.com/SymbiFlow/symbiflow-xc-fasm2bels
    SOURCE_DIR "${CMAKE_BINARY_DIR}/fasm2bels"
    PATCH_COMMAND ""
    CONFIGURE_COMMAND "git submodule update --init --recursive"
    COMMAND "make build"
    COMMAND "sudo apt-get install python3 python3-pip python3-yaml"
    COMMAND "sudo -H pip3 install -r requirements.txt"
    COMMAND "./download-latest-db.sh"
    BUILD_COMMAND ""
    INSTALL_COMMAND "sudo python3 setup.py install"
    #TEST_COMMAND ""
    )